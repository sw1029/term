{
  "model_name": "google/gemma-2-2b-it",
  "layer_idx": 8,
  "command": "main.py experiment.use_multi_contrast=true sae.loss_option=4 sae.loss_module=option4_loss sae.guidance_method=contrastive sae.guidance_coeff=1.0 sae.alpha_concept.code=0.03 sae.alpha_concept.harm=0.06 sae.alpha_concept.struct=0.0 sae.l1_coeff=0.003 sae.use_l0=true sae.l0_coeff=0.0005 sae.role_sep_coeff=0.003 +sae.align_coeff=0.5 +sae.align_pos_margin=0.25 +sae.align_neg_margin=0.05 sae.layer_idx=8 experiment.layer_sweep=[8] experiment.strength_sweep=[15.0] paths.logs_root=experimentLog/layer_sweep",
  "sae": {
    "input_dim": 2304,
    "sae_dim": 9216,
    "fixed_v_cnt": 3,
    "batch_size": 3,
    "epochs": 2,
    "max_steps": 2000,
    "l1_coeff": 0.003,
    "l0_coeff": 0.0005,
    "use_l0": true,
    "concept_samples_per_label": 100,
    "loss_option": 4,
    "loss_module": "option4_loss",
    "concept_feature_indices": {
      "code": 0,
      "harm": 1,
      "struct": 2
    },
    "alpha_concept": {
      "code": 0.03,
      "harm": 0.06,
      "struct": 0.0
    },
    "positive_targets": {
      "code": 1,
      "harm": 1,
      "struct": 1
    },
    "guidance_method": "contrastive",
    "guidance_margin": 0.0,
    "guidance_coeff": 1.0,
    "guidance_mse_pos_value": 1.0,
    "guidance_mse_neg_value": 0.0,
    "jumprelu_bandwidth": 0.001,
    "jumprelu_init_threshold": 0.001,
    "role_sep_coeff": 0.003
  },
  "gnn": {
    "use_gnn": true,
    "top_k": 10
  },
  "experiment": {
    "device": "cuda",
    "dataset_name": "wikitext",
    "dataset_config": "wikitext-2-raw-v1",
    "use_multi_contrast": true,
    "num_steering_samples_per_label": 10,
    "top_k_for_plot": 10,
    "layer_sweep": [
      8
    ],
    "strength_sweep": [
      15.0
    ]
  },
  "steering": {
    "label": "harm",
    "feature_idx": 1,
    "strength": 15.0,
    "hook_layer_idx": 7
  },
  "prompt": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.",
  "output": {
    "before": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Avoid using jargon or slang unless it's appropriate for the recipient and context.\n12. Proofread for spelling and grammar errors.\n13. Sign off with a professional closing.\n14. Use a professional",
    "after": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Always be respectful and considerate in your communication.\n12. Avoid sending unsolicited or inappropriate emails. \n\n\n**How would you like to see this implemented?**\n\n**Please provide an example of an email etiquette guide with the"
  },
  "feature_stats": {
    "indices": [
      1,
      7325,
      2565,
      827,
      0,
      6606,
      1002,
      190,
      5592,
      5343,
      3416
    ],
    "f_before": [
      0.0,
      0.0,
      0.0,
      0.3343692421913147,
      0.0,
      0.0,
      0.0,
      0.0,
      10.088294982910156,
      0.0,
      0.0
    ],
    "f_after": [
      0.0,
      0.0,
      1.8718348741531372,
      1.4953335523605347,
      0.0,
      0.0,
      0.0,
      0.0,
      34.3384895324707,
      1.4880502223968506,
      1.2161580324172974
    ],
    "g_before": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ],
    "g_after": [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ],
    "num_batches_for_stats": 10
  },
  "loss_summary": {
    "train_mean_loss": 3.5940934488475325,
    "train_mean_l2": 2.190785840179771,
    "train_mean_l1": 1.0225915326327086,
    "num_steps": 2000,
    "num_batches": 2000
  },
  "feature_std_summary": {
    "plot_path": "outputs/plots/20251129-123302/feature_std_layer_8.html",
    "mean_std": 0.49484798312187195,
    "max_std": 16.498830795288086
  },
  "hook_comparison": {
    "hook_layer_idx_minus1": {
      "hook_layer_idx": 7,
      "feature_stats": {
        "indices": [
          1,
          7325,
          2565,
          827,
          0,
          6606,
          1002,
          190,
          5592,
          5343,
          3416
        ],
        "f_before": [
          0.0,
          0.0,
          0.0,
          0.3343692421913147,
          0.0,
          0.0,
          0.0,
          0.0,
          10.088294982910156,
          0.0,
          0.0
        ],
        "f_after": [
          0.0,
          0.0,
          1.8718348741531372,
          1.4953335523605347,
          0.0,
          0.0,
          0.0,
          0.0,
          34.3384895324707,
          1.4880502223968506,
          1.2161580324172974
        ],
        "g_before": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "g_after": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ]
      },
      "top_activated_features": {
        "features": [
          {
            "index": 5262,
            "f_before": 43.13726043701172,
            "f_after": 93.37659454345703,
            "delta_f": 50.23933410644531
          },
          {
            "index": 5592,
            "f_before": 10.088294982910156,
            "f_after": 34.3384895324707,
            "delta_f": 24.250194549560547
          },
          {
            "index": 7105,
            "f_before": 9.647660255432129,
            "f_after": 19.63459587097168,
            "delta_f": 9.98693561553955
          },
          {
            "index": 2619,
            "f_before": 33.83906555175781,
            "f_after": 43.367916107177734,
            "delta_f": 9.528850555419922
          },
          {
            "index": 3406,
            "f_before": 0.07340975105762482,
            "f_after": 3.8997926712036133,
            "delta_f": 3.8263829201459885
          },
          {
            "index": 169,
            "f_before": 0.0,
            "f_after": 3.6229095458984375,
            "delta_f": 3.6229095458984375
          },
          {
            "index": 6625,
            "f_before": 0.0,
            "f_after": 3.5132663249969482,
            "delta_f": 3.5132663249969482
          },
          {
            "index": 8202,
            "f_before": 0.0,
            "f_after": 3.4164633750915527,
            "delta_f": 3.4164633750915527
          },
          {
            "index": 1332,
            "f_before": 0.0,
            "f_after": 3.3292431831359863,
            "delta_f": 3.3292431831359863
          },
          {
            "index": 5931,
            "f_before": 0.0,
            "f_after": 3.3218674659729004,
            "delta_f": 3.3218674659729004
          },
          {
            "index": 967,
            "f_before": 0.03760324791073799,
            "f_after": 3.321965217590332,
            "delta_f": 3.284361969679594
          },
          {
            "index": 3882,
            "f_before": 0.0,
            "f_after": 3.268202543258667,
            "delta_f": 3.268202543258667
          },
          {
            "index": 590,
            "f_before": 0.0,
            "f_after": 3.252770185470581,
            "delta_f": 3.252770185470581
          },
          {
            "index": 6622,
            "f_before": 0.0,
            "f_after": 3.251969575881958,
            "delta_f": 3.251969575881958
          },
          {
            "index": 6842,
            "f_before": 0.0,
            "f_after": 3.2509515285491943,
            "delta_f": 3.2509515285491943
          },
          {
            "index": 5658,
            "f_before": 0.0,
            "f_after": 3.2451171875,
            "delta_f": 3.2451171875
          }
        ],
        "k": 16
      },
      "output": {
        "before": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Sign off professionally.\n12. Use a professional email address.\n\n\nThese are just the basics, of course. There are many other nuances and specific rules depending on the situation and your workplace culture. \n\n**Can you",
        "after": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Use proper grammar and spelling.\n12. Use a professional email signature.\n\nFollowing these rules will help you to create a positive and professional email experience for everyone.\n\n\n**Please note:** These are general guidelines, and some"
      }
    },
    "hook_layer_idx_same": {
      "hook_layer_idx": 8,
      "feature_stats": {
        "indices": [
          1,
          7325,
          2565,
          827,
          0,
          6606,
          1002,
          190,
          5592,
          5343,
          3416
        ],
        "f_before": [
          0.0,
          0.0,
          0.0,
          0.3343692421913147,
          0.0,
          0.0,
          0.0,
          0.0,
          10.088294982910156,
          0.0,
          0.0
        ],
        "f_after": [
          0.0,
          0.0,
          0.0,
          0.3343692421913147,
          0.0,
          0.0,
          0.0,
          0.0,
          10.088294982910156,
          0.0,
          0.0
        ],
        "g_before": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ],
        "g_after": [
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0,
          0.0
        ]
      },
      "top_activated_features": {
        "features": [
          {
            "index": 8,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 10,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 4,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 15,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 12,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 3,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 9,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 1,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 11,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 5,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 7,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 13,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 0,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 2,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 6,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          },
          {
            "index": 14,
            "f_before": 0.0,
            "f_after": 0.0,
            "delta_f": 0.0
          }
        ],
        "k": 16
      },
      "output": {
        "before": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Avoid sending large files without prior consent.\n12. Avoid personal information like phone numbers or addresses in email signatures.\n13. Keep emails organized with a clear subject line and folder structure.\n14. Set appropriate",
        "after": "Outline the key rules of email etiquette.\n\n1. Use a professional greeting and ensure accuracy when addressing the recipient.\n2. Keep messages short, clear, and concise.\n3. Write with a polite and friendly tone.\n4. Avoid using all caps or special characters.\n5. Respond promptly to emails.\n6. Include a meaningful subject line.\n7. Double check attachments before sending.\n8. Include only necessary recipients in the To and CC fields.\n9. Use the BCC field when sending emails to multiple people. \n10. Proofread messages before sending.\n11. Be respectful of your recipients' time and energy.\n12. Use a clear and concise language.\n\n\nThese are the rules of email etiquette.\n\nLet me know if you have any other questions. \n"
      }
    }
  }
}